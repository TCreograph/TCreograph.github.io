import{useSiteData as I}from"@vuepress/client";import{defineComponent as b,computed as y,h as n}from"vue";import{useRoute as L,useRouter as O,RouterLink as g}from"vue-router";import{keys as C,useLocaleConfig as R,startsWith as N,endsWith as d}from"vuepress-shared/client";import"../../styles/font-icon.scss";import"../styles/catalog.scss";var v=b({name:"FontIcon",props:{icon:{type:String,default:""},color:{type:String,default:""},size:{type:[String,Number],default:""}},setup(t){const f=y(()=>{const u={};return t.color&&(u.color=t.color),t.size&&(u["font-size"]=Number.isNaN(Number(t.size))?t.size:`${t.size}px`),C(u).length?u:null});return()=>t.icon?n("span",{key:t.icon,class:["font-icon icon",FONT_ICON_TYPE==="fontawesome"?"fa-fw fa-sm":"",t.icon.includes(" ")?t.icon:`${FONT_ICON_PREFIX}${t.icon}`],style:f.value}):null}}),S=b({name:"Catalog",props:{base:{type:String,default:""},level:{type:Number,default:3},titleGetter:{type:Function,default:t=>t.title},iconGetter:{type:Function,default:t=>t.icon},orderGetter:{type:Function,default:t=>t.order||0},shouldIndex:{type:Function,default:t=>t.index!==!1}},setup(t){const f=R(CATALOG_LOCALES),u=L(),w=O(),k=I(),x=()=>{const c=t.base||u.path.replace(/\/[^/]+$/,"/"),m=w.getRoutes(),h=[];return m.filter(({meta:l,path:e})=>{if(!N(e,c)||e===c)return!1;if(c==="/"){const a=C(k.value.locales).filter(r=>r!=="/");if(e==="/404.html"||a.some(r=>N(e,r)))return!1}return(d(e,".html")&&!d(e,"/index.html")||d(e,"/"))&&t.shouldIndex(l)}).map(({path:l,meta:e})=>{const a=l.substring(c.length).split("/").length;return{title:t.titleGetter(e),icon:t.iconGetter(e),base:l.replace(/\/[^/]+\/?$/,"/"),order:t.orderGetter(e),level:d(l,"/")?a-1:a,path:l}}).filter(({title:l,level:e})=>e<=t.level||!l).sort(({title:l,level:e,path:a,order:r},{title:i,level:o,path:p,order:s})=>e-o||(d(a,"/index.html")?-1:d(p,"/index.html")?1:r===null?s===null?l.localeCompare(i):s:s===null?r:r>0?s>0?r-s:-1:s<0?r-s:1)).forEach(l=>{var e;const{base:a,level:r}=l;switch(r){case 1:h.push(l);break;case 2:{const i=h.find(o=>o.path===a);i&&(i.children??(i.children=[])).push(l);break}default:{const i=h.find(o=>o.path===a.replace(/\/[^/]+\/$/,"/"));if(i){const o=(e=i.children)==null?void 0:e.find(p=>p.path===a);o&&(o.children??(o.children=[])).push(l)}}}}),h},F=y(()=>x());return()=>n("div",{class:"catalog-wrapper"},[n("h2",{class:"main-title"},f.value.title),...F.value.map(({children:c=[],icon:m,path:h,title:l},e)=>[n("h3",{id:l,class:["child-title",{"has-children":c.length}]},[n("a",{href:`#${l}`,class:"header-anchor"},"#"),n(g,{class:"catalog-title",to:h},()=>[m?n(v,{icon:m}):null,`${e+1}. ${l||"Unknown"}`])]),c.length?n("ul",{class:"child-catalog-wrapper"},c.map(({children:a=[],icon:r,path:i,title:o},p)=>n("li",{class:"child-catalog-item"},[n("div",{class:["sub-title",{"has-children":a.length}]},[n("a",{href:`#${o}`,class:"header-anchor"},"#"),n(g,{class:"catalog-title",to:i},()=>[r?n(v,{icon:r}):null,`${e+1}.${p+1} ${o||"Unknown"}`])]),a.length?n("div",{class:"sub-catalog-wrapper"},a.map(({icon:s,path:$,title:G},z)=>n(g,{class:"sub-catalog-item",to:$},()=>[s?n(v,{icon:s}):null,`${e+1}.${p+1}.${z+1} ${G||"Unknown"}`]))):null]))):null])])}});export{S as default};
//# sourceMappingURL=Catalog.js.map
