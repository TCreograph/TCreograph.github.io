import{ref as c,computed as d,unref as n,onMounted as b,isRef as w,watch as N,defineComponent as S,h as p}from"vue";import{isString as f}from"@vuepress/shared";import{useEventListener as h}from"@vueuse/core";import"../styles/xi-gua.scss";const g=e=>f(e)?e:`${e}px`,x=(e,i=0)=>{const r=c(),l=d(()=>g(n(e.width)||"100%")),a=c("auto"),y=t=>{if(f(t)){const[o,s]=t.split(":"),m=Number(o)/Number(s);if(!Number.isNaN(m))return m}return typeof t=="number"?t:16/9},v=t=>{const o=n(e.height),s=y(n(e.ratio));return o?g(o):`${Number(t)/s+n(i)}px`},u=()=>{r.value&&(a.value=v(r.value.clientWidth))};return b(()=>{u(),w(i)&&N(i,()=>u()),h("orientationchange",()=>u()),h("resize",()=>u())}),{el:r,width:l,height:a}};var $=S({name:"XiGua",props:{id:{type:String,required:!0},title:{type:String,default:"A XiGua video"},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},time:{type:[String,Number],default:0},autoplay:Boolean},setup(e){const{el:i,width:r,height:l}=x(e),a=d(()=>`https://www.ixigua.com/iframe/${e.id}?startTime=${e.time}&autoplay=${e.autoplay?1:0}`);return()=>[p("div",{class:"xi-gua-desc"},p("a",{class:"sr-only",href:a.value},e.title)),p("iframe",{ref:i,src:a.value,title:e.title,class:"xi-gua-iframe",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",style:{width:r.value,height:l.value}})]}});export{$ as default};
//# sourceMappingURL=XiGua.js.map
