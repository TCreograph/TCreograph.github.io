import{useEventListener as o}from"@vueuse/core";import{checkIsMobile as $}from"vuepress-shared/client";import{ref as h,computed as c,unref as m,onMounted as f,isRef as w,watch as N,defineComponent as S,h as g}from"vue";import{isString as y}from"@vuepress/shared";import"../styles/bili-bili.scss";const v=i=>y(i)?i:`${i}px`,B=(i,e=0)=>{const a=h(),l=c(()=>v(m(i.width)||"100%")),u=h("auto"),p=r=>{if(y(r)){const[n,d]=r.split(":"),b=Number(n)/Number(d);if(!Number.isNaN(b))return b}return typeof r=="number"?r:16/9},s=r=>{const n=m(i.height),d=p(m(i.ratio));return n?v(n):`${Number(r)/d+m(e)}px`},t=()=>{a.value&&(u.value=s(a.value.clientWidth))};return f(()=>{t(),w(e)&&N(e,()=>t()),o("orientationchange",()=>t()),o("resize",()=>t())}),{el:a,width:l,height:u}};var k=S({name:"BiliBili",props:{bvid:{type:String,required:!0},title:{type:String,default:"A BiliBili video"},page:{type:[String,Number],default:1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},time:{type:[String,Number],default:0},lowQuality:Boolean,noDanmaku:Boolean},setup(i){const e=h(!1),a=c(()=>e.value?0:68),l=()=>{e.value=$(navigator.userAgent)||u.value.clientWidth<640},{el:u,width:p,height:s}=B(i,a),t=c(()=>`https://player.bilibili.com/player.html?bvid=${i.bvid}&t=${i.time}&high_quality=${i.lowQuality?0:1}&page=${i.page}&danmaku=${i.noDanmaku?0:1}`);return f(()=>{l(),o("orientationchange",()=>l()),o("resize",()=>l())}),()=>[g("div",{class:"bili-desc"},g("a",{class:"sr-only",href:t.value},i.title)),g("iframe",{ref:u,src:`https://player.bilibili.com/player.html?bvid=${i.bvid}&t=${i.time}&high_quality=${i.lowQuality?0:1}&page=${i.page}&danmaku=${i.noDanmaku?0:1}`,title:i.title,class:"bili-iframe",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",style:{width:p.value,height:s.value}})]}});export{k as default};
//# sourceMappingURL=BiliBili.js.map
