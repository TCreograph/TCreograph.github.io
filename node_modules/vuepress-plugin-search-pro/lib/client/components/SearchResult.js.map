{"version":3,"file":"SearchResult.js","sources":["../../../src/client/components/icons.ts","../../../src/client/define.ts","../../../src/client/composables/searchHistory.ts","../../../src/client/composables/searchIndex.ts","../../../src/client/utils/matchContent.ts","../../../src/client/utils/result.ts","../../../src/client/composables/searchResult.ts","../../../src/client/components/SearchResult.ts"],"sourcesContent":["import { h } from \"vue\";\nimport { IconBase } from \"vuepress-shared/client\";\n\nimport type { FunctionalComponent } from \"vue\";\n\nexport const CloseIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"close\" }, () =>\n    h(\"path\", {\n      d: \"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z\",\n    })\n  );\n\nCloseIcon.displayName = \"CloseIcon\";\n\nexport const HeadingIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"heading\" }, () =>\n    h(\"path\", {\n      d: \"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z\",\n    })\n  );\n\nHeadingIcon.displayName = \"HeadingIcon\";\n\nexport const HeartIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"heart\" }, () =>\n    h(\"path\", {\n      d: \"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z\",\n    })\n  );\n\nHeartIcon.displayName = \"HeartIcon\";\n\nexport const HistoryIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"history\" }, () =>\n    h(\"path\", {\n      d: \"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z\",\n    })\n  );\n\nHistoryIcon.displayName = \"HistoryIcon\";\n\nexport const TitleIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"title\" }, () =>\n    h(\"path\", {\n      d: \"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z\",\n    })\n  );\n\nTitleIcon.displayName = \"TitleIcon\";\n\nexport const SearchIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"search\" }, () =>\n    h(\"path\", {\n      d: \"M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28\",\n    })\n  );\n\nSearchIcon.displayName = \"SearchIcon\";\n","import type {\n  SearchProCustomFieldFormatter,\n  SearchProHotKeyOptions,\n  SearchProLocaleConfig,\n} from \"../shared/index.js\";\n\ntype SearchProClientCustomFiledConfig = Record<\n  string,\n  SearchProCustomFieldFormatter\n>;\n\ndeclare const SEARCH_PRO_CUSTOM_FIELDS: SearchProClientCustomFiledConfig;\ndeclare const SEARCH_PRO_DELAY: number;\ndeclare const SEARCH_PRO_HISTORY_COUNT: number;\ndeclare const SEARCH_PRO_HOTKEYS: SearchProHotKeyOptions[];\ndeclare const SEARCH_PRO_LOCALES: SearchProLocaleConfig;\n\nexport const searchProClientCustomFiledConfig = SEARCH_PRO_CUSTOM_FIELDS;\nexport const searchProDelay = SEARCH_PRO_DELAY;\nexport const searchProHistoryCount = SEARCH_PRO_HISTORY_COUNT;\nexport const searchProHotKeys = SEARCH_PRO_HOTKEYS;\nexport const searchProLocales = SEARCH_PRO_LOCALES;\n","import { useLocalStorage } from \"@vueuse/core\";\nimport { searchProHistoryCount } from \"../define.js\";\n\nimport type { Ref } from \"vue\";\nimport type { MatchedItem } from \"../utils/result.js\";\n\nconst SEARCH_PRO_STORAGE = \"search-pro-history-results\";\n\nexport interface SearchHistory {\n  history: Ref<MatchedItem[]>;\n  addHistory: (item: MatchedItem) => void;\n  removeHistory: (index: number) => void;\n}\n\nconst searchProStorage = useLocalStorage<MatchedItem[]>(SEARCH_PRO_STORAGE, []);\n\nexport const useSearchHistory = (): SearchHistory => {\n  const addHistory = (item: MatchedItem): void => {\n    if (searchProStorage.value.length < searchProHistoryCount)\n      searchProStorage.value = [item, ...searchProStorage.value];\n    else\n      searchProStorage.value = [\n        item,\n        ...searchProStorage.value.slice(0, searchProHistoryCount - 1),\n      ];\n  };\n\n  const removeHistory = (index: number): void => {\n    searchProStorage.value = [\n      ...searchProStorage.value.slice(0, index),\n      ...searchProStorage.value.slice(index + 1),\n    ];\n  };\n\n  return {\n    history: searchProStorage,\n    addHistory,\n    removeHistory,\n  };\n};\n","import { database } from \"@temp/search-pro/index\";\nimport { atou } from \"vuepress-shared/client\";\nimport { computed, ref } from \"vue\";\n\nimport type { SearchIndex } from \"../../shared/index.js\";\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\ndeclare const __VUEPRESS_DEV__: boolean;\ndeclare const __VUE_HMR_RUNTIME__: Record<string, unknown>;\n\nconst compressedSearchIndex = ref(database);\n\nexport const searchIndex = computed(\n  () => <SearchIndex>JSON.parse(atou(compressedSearchIndex.value))\n);\n\n// @ts-ignore\nif (__VUEPRESS_DEV__ && (import.meta.webpackHot || import.meta.hot))\n  __VUE_HMR_RUNTIME__[\"updateSearchProDatabase\"] = (database: string): void => {\n    compressedSearchIndex.value = database;\n  };\n","export type Word = [tag: string, content: string] | string;\n\nconst maxLength = 100;\nconst suffixLength = 20;\n\nexport const getMatchedContent = (\n  content: string,\n  queryString: string\n): Word[] | null => {\n  const contentLowerCase = content.toLowerCase();\n  const queryStringLowerCase = queryString.toLowerCase();\n  const result: Word[] = [];\n\n  let startIndex = 0;\n  let contentLength = 0;\n\n  const addResult = (content: string, isEnd = false): void => {\n    let text = \"\";\n\n    // a beginning of a long string\n    if (contentLength === 0)\n      text =\n        content.length > suffixLength\n          ? `… ${content.slice(-suffixLength)}`\n          : content;\n    // already the last text\n    else if (isEnd)\n      text =\n        // if the string will be longer than maxLength\n        content.length + contentLength > maxLength\n          ? `${content.slice(0, maxLength - contentLength)}… `\n          : content;\n    // text is at the middle\n    else\n      text =\n        content.length > suffixLength\n          ? `${content.slice(0, suffixLength)} … ${content.slice(\n              -suffixLength\n            )}`\n          : content;\n\n    if (text) result.push(text);\n    contentLength += text.length;\n\n    if (!isEnd) {\n      result.push([\"strong\", queryString]);\n      contentLength += queryString.length;\n\n      if (contentLength >= maxLength) result.push(\" …\");\n    }\n  };\n\n  let matchIndex = contentLowerCase.indexOf(queryStringLowerCase, startIndex);\n\n  if (matchIndex === -1) return null;\n\n  while (matchIndex >= 0) {\n    const endIndex = matchIndex + queryStringLowerCase.length;\n\n    // append content before\n    addResult(content.slice(startIndex, matchIndex));\n\n    startIndex = endIndex;\n\n    if (contentLength > maxLength) break;\n\n    matchIndex = contentLowerCase.indexOf(queryStringLowerCase, startIndex);\n  }\n\n  if (contentLength < maxLength) addResult(content.slice(startIndex), true);\n\n  return result;\n};\n","import { getMatchedContent } from \"./matchContent.js\";\n\nimport type { Word } from \"./matchContent.js\";\nimport type { LocaleIndex } from \"../../shared/index.js\";\n\nexport interface TitleMatchedItem {\n  type: \"title\";\n  display: Word[];\n  path: string;\n}\n\nexport interface HeadingMatchedItem {\n  type: \"heading\";\n  display: Word[];\n  path: string;\n}\n\nexport interface CustomMatchedItem {\n  type: \"custom\";\n  path: string;\n  index: string;\n  display: Word[];\n}\n\nexport interface ContentMatchedItem {\n  type: \"content\";\n  path: string;\n  header: string;\n  display: Word[];\n}\n\nexport type MatchedItem =\n  | TitleMatchedItem\n  | HeadingMatchedItem\n  | ContentMatchedItem\n  | CustomMatchedItem;\n\nexport interface Result {\n  title: string;\n  contents: MatchedItem[];\n}\n\nconst getResultsWeight = (matchedItem: MatchedItem[]): number =>\n  matchedItem.reduce<number>(\n    (current, { type }) =>\n      current +\n      (type === \"title\"\n        ? 50\n        : type === \"heading\"\n        ? 20\n        : type === \"custom\"\n        ? 10\n        : 1),\n    0\n  );\n\nexport const getResults = (\n  queryString: string,\n  localeIndex: LocaleIndex\n): Result[] => {\n  const suggestions = <Record<string, MatchedItem[]>>{};\n\n  for (const [path, pageIndex] of Object.entries(localeIndex)) {\n    const parentPageTitle =\n      localeIndex[path.replace(/\\/[^\\\\]*$/, \"\")]?.title || \"\";\n    const title = `${parentPageTitle ? `${parentPageTitle} > ` : \"\"}${\n      pageIndex.title\n    }`;\n\n    const titleContent = getMatchedContent(pageIndex.title, queryString);\n\n    if (titleContent) {\n      suggestions[title] = [\n        ...(suggestions[title] || []),\n        {\n          type: \"title\",\n          path,\n          display: titleContent,\n        },\n      ];\n    }\n\n    if (pageIndex.customFields)\n      Object.entries(pageIndex.customFields).forEach(\n        ([index, customFields]) => {\n          customFields.forEach((customField) => {\n            const customFieldContent = getMatchedContent(\n              customField,\n              queryString\n            );\n\n            if (customFieldContent)\n              suggestions[title] = [\n                ...(suggestions[title] || []),\n                {\n                  type: \"custom\",\n                  path,\n                  index,\n                  display: customFieldContent,\n                },\n              ];\n          });\n        }\n      );\n\n    for (const headerIndex of pageIndex.contents) {\n      const headerContent = getMatchedContent(headerIndex.header, queryString);\n\n      if (headerContent) {\n        suggestions[title] = [\n          ...(suggestions[title] || []),\n          {\n            type: \"heading\",\n            path: path + (headerIndex.slug ? `#${headerIndex.slug}` : \"\"),\n            display: headerContent,\n          },\n        ];\n      }\n\n      for (const content of headerIndex.contents) {\n        const matchedContent = getMatchedContent(content, queryString);\n\n        if (matchedContent) {\n          suggestions[title] = [\n            ...(suggestions[title] || []),\n            {\n              type: \"content\",\n              header: headerIndex.header,\n              path: path + (headerIndex.slug ? `#${headerIndex.slug}` : \"\"),\n              display: matchedContent,\n            },\n          ];\n        }\n      }\n    }\n  }\n\n  return Object.keys(suggestions)\n    .sort(\n      (titleA, titleB) =>\n        getResultsWeight(suggestions[titleA]) -\n        getResultsWeight(suggestions[titleB])\n    )\n    .map((title) => ({ title, contents: suggestions[title] }));\n};\n","import { useDebounceFn } from \"@vueuse/core\";\nimport { useRouteLocale } from \"@vuepress/client\";\nimport { computed, ref, watch } from \"vue\";\n\nimport { searchIndex } from \"./searchIndex.js\";\nimport { searchProDelay } from \"../define.js\";\nimport { getResults } from \"../utils/index.js\";\n\nimport type { Ref } from \"vue\";\nimport type { Result } from \"../utils/index.js\";\n\nexport const useSearchResults = (query: Ref<string>): Ref<Result[]> => {\n  const routeLocale = useRouteLocale();\n  const results = ref<Result[]>([]);\n\n  const localeIndex = computed(() => searchIndex.value[routeLocale.value]);\n  const updateResults = useDebounceFn((queryString: string): void => {\n    results.value = queryString\n      ? getResults(queryString, localeIndex.value)\n      : [];\n  }, searchProDelay);\n\n  watch([query, routeLocale], () => {\n    void updateResults(query.value);\n  });\n\n  return results;\n};\n","import { useRouteLocale } from \"@vuepress/client\";\nimport { isPlainObject, isString } from \"@vuepress/shared\";\nimport { useEventListener } from \"@vueuse/core\";\nimport { clearAllBodyScrollLocks, disableBodyScroll } from \"body-scroll-lock\";\nimport {\n  computed,\n  defineComponent,\n  h,\n  onBeforeUnmount,\n  onMounted,\n  ref,\n  toRef,\n} from \"vue\";\nimport { RouterLink, useRoute, useRouter } from \"vue-router\";\nimport { useLocaleConfig } from \"vuepress-shared/client\";\n\nimport {\n  CloseIcon,\n  HeadingIcon,\n  HeartIcon,\n  HistoryIcon,\n  TitleIcon,\n} from \"./icons.js\";\nimport { useSearchHistory, useSearchResults } from \"../composables/index.js\";\nimport {\n  searchProClientCustomFiledConfig,\n  searchProLocales,\n} from \"../define.js\";\n\nimport type { VNode } from \"vue\";\nimport type { MatchedItem, Word } from \"../utils/index.js\";\n\nimport \"../styles/search-result.scss\";\n\nexport default defineComponent({\n  name: \"SearchResult\",\n\n  props: {\n    /**\n     * Query string\n     *\n     * 查询字符串\n     */\n    query: {\n      type: String,\n      required: true,\n    },\n  },\n\n  emits: {\n    close: () => true,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    updateQuery: (_query: string) => true,\n  },\n\n  setup(props, { emit }) {\n    const router = useRouter();\n    const route = useRoute();\n    const routeLocale = useRouteLocale();\n    const locale = useLocaleConfig(searchProLocales);\n    const { history, addHistory, removeHistory } = useSearchHistory();\n\n    const query = toRef(props, \"query\");\n    const searchResults = useSearchResults(query);\n\n    const activatedResultIndex = ref(0);\n    const activatedResultContentIndex = ref(0);\n    const searchResult = ref<HTMLElement>();\n\n    const hasResults = computed(() => searchResults.value.length > 0);\n    const activatedResult = computed(\n      () => searchResults.value[activatedResultIndex.value] || null\n    );\n\n    const activePreviousResult = (): void => {\n      activatedResultIndex.value =\n        activatedResultIndex.value > 0\n          ? activatedResultIndex.value - 1\n          : searchResults.value.length - 1;\n      activatedResultContentIndex.value =\n        activatedResult.value.contents.length - 1;\n    };\n\n    const activeNextResult = (): void => {\n      activatedResultIndex.value =\n        activatedResultIndex.value < searchResults.value.length - 1\n          ? activatedResultIndex.value + 1\n          : 0;\n      activatedResultContentIndex.value = 0;\n    };\n\n    const activeNextResultContent = (): void => {\n      if (\n        activatedResultContentIndex.value <\n        activatedResult.value.contents.length - 1\n      )\n        activatedResultContentIndex.value =\n          activatedResultContentIndex.value + 1;\n      else activeNextResult();\n    };\n\n    const activePreviousResultContent = (): void => {\n      if (activatedResultContentIndex.value > 0)\n        activatedResultContentIndex.value =\n          activatedResultContentIndex.value - 1;\n      else activePreviousResult();\n    };\n\n    const getVNodes = (display: Word[]): (VNode | string)[] =>\n      display.map((word) => (isString(word) ? word : h(word[0], word[1])));\n\n    const getDisplay = (matchedItem: MatchedItem): (VNode | string)[] => {\n      if (matchedItem.type === \"custom\") {\n        const formatterConfig =\n          searchProClientCustomFiledConfig[matchedItem.index] || \"$content\";\n\n        const [prefix, suffix = \"\"] = isPlainObject(formatterConfig)\n          ? formatterConfig[routeLocale.value].split(\"$content\")\n          : formatterConfig.split(\"$content\");\n\n        return getVNodes([prefix, ...matchedItem.display, suffix]);\n      }\n\n      return getVNodes(matchedItem.display);\n    };\n\n    const resetSearchResult = (): void => {\n      activatedResultIndex.value = 0;\n      activatedResultContentIndex.value = 0;\n      emit(\"updateQuery\", \"\");\n      emit(\"close\");\n    };\n\n    onMounted(() => {\n      useEventListener(\"keydown\", (event: KeyboardEvent) => {\n        if (!hasResults.value) return;\n\n        if (event.key === \"ArrowUp\") activePreviousResultContent();\n        else if (event.key === \"ArrowDown\") activeNextResultContent();\n        else if (event.key === \"Enter\") {\n          const item =\n            activatedResult.value.contents[activatedResultContentIndex.value];\n\n          if (route.path !== item.path) {\n            addHistory(item);\n            void router.push(item.path);\n            resetSearchResult();\n          }\n        }\n      });\n\n      disableBodyScroll(searchResult.value!, { reserveScrollBarGap: true });\n    });\n\n    onBeforeUnmount(() => {\n      clearAllBodyScrollLocks();\n    });\n\n    return (): VNode =>\n      h(\n        \"div\",\n        {\n          class: [\n            \"search-pro-result\",\n            {\n              empty:\n                query.value === \"\"\n                  ? history.value.length === 0\n                  : !hasResults.value,\n            },\n          ],\n          ref: searchResult,\n        },\n        query.value === \"\"\n          ? history.value.length\n            ? h(\n                \"ul\",\n                { class: \"search-pro-result-list\" },\n                h(\"li\", { class: \"search-pro-result-list-item\" }, [\n                  h(\n                    \"div\",\n                    { class: \"search-pro-result-title\" },\n                    locale.value.history\n                  ),\n                  history.value.map((item, historyIndex) =>\n                    h(\n                      RouterLink,\n                      {\n                        to: item.path,\n                        class: [\n                          \"search-pro-result-item\",\n                          {\n                            active:\n                              activatedResultContentIndex.value ===\n                              historyIndex,\n                          },\n                        ],\n                        onClick: () => {\n                          console.log(\"click\");\n                          resetSearchResult();\n                        },\n                      },\n                      () => [\n                        h(HistoryIcon, { class: \"search-pro-result-type\" }),\n                        h(\"div\", { class: \"search-pro-result-content\" }, [\n                          item.type === \"content\" && item.header\n                            ? h(\"div\", { class: \"content-header\" }, item.header)\n                            : null,\n                          h(\"div\", getDisplay(item)),\n                        ]),\n                        h(\n                          \"button\",\n                          {\n                            class: \"search-pro-close-icon\",\n                            onClick: (event: Event) => {\n                              event.preventDefault();\n                              event.stopPropagation();\n                              removeHistory(historyIndex);\n                            },\n                          },\n                          h(CloseIcon)\n                        ),\n                      ]\n                    )\n                  ),\n                ])\n              )\n            : locale.value.emptyHistory\n          : hasResults.value\n          ? h(\n              \"ul\",\n              { class: \"search-pro-result-list\" },\n              searchResults.value.map(({ title, contents }, index) => {\n                const isCurrentResultActive =\n                  activatedResultIndex.value === index;\n\n                return h(\n                  \"li\",\n                  {\n                    class: [\n                      \"search-pro-result-list-item\",\n                      { active: isCurrentResultActive },\n                    ],\n                  },\n                  [\n                    h(\n                      \"div\",\n                      { class: \"search-pro-result-title\" },\n                      title || \"Documentation\"\n                    ),\n                    contents.map((item, contentIndex) => {\n                      const isCurrentContentActive =\n                        isCurrentResultActive &&\n                        activatedResultContentIndex.value === contentIndex;\n\n                      return h(\n                        RouterLink,\n                        {\n                          to: item.path,\n                          class: [\n                            \"search-pro-result-item\",\n                            {\n                              active: isCurrentContentActive,\n                              \"aria-selected\": isCurrentContentActive,\n                            },\n                          ],\n                          onClick: () => {\n                            addHistory(item);\n                            resetSearchResult();\n                          },\n                        },\n                        () => [\n                          item.type === \"content\"\n                            ? null\n                            : h(\n                                item.type === \"title\"\n                                  ? TitleIcon\n                                  : item.type === \"heading\"\n                                  ? HeadingIcon\n                                  : HeartIcon,\n                                { class: \"search-pro-result-type\" }\n                              ),\n                          h(\"div\", { class: \"search-pro-result-content\" }, [\n                            item.type === \"content\" && item.header\n                              ? h(\n                                  \"div\",\n                                  { class: \"content-header\" },\n                                  item.header\n                                )\n                              : null,\n                            h(\"div\", getDisplay(item)),\n                          ]),\n                        ]\n                      );\n                    }),\n                  ]\n                );\n              })\n            )\n          : locale.value.emptyResult\n      );\n  },\n});\n"],"names":["CloseIcon","h","IconBase","HeadingIcon","HeartIcon","HistoryIcon","TitleIcon","searchProClientCustomFiledConfig","searchProDelay","searchProHistoryCount","searchProLocales","SEARCH_PRO_STORAGE","searchProStorage","useLocalStorage","useSearchHistory","item","index","compressedSearchIndex","ref","database","searchIndex","computed","atou","getMatchedContent","content","queryString","contentLowerCase","queryStringLowerCase","result","startIndex","contentLength","addResult","isEnd","text","matchIndex","endIndex","getResultsWeight","matchedItem","current","type","getResults","localeIndex","_a","suggestions","path","pageIndex","parentPageTitle","title","titleContent","customFields","customField","customFieldContent","headerIndex","headerContent","matchedContent","titleA","titleB","useSearchResults","query","routeLocale","useRouteLocale","results","updateResults","useDebounceFn","watch","SearchResult","defineComponent","_query","props","emit","router","useRouter","route","useRoute","locale","useLocaleConfig","history","addHistory","removeHistory","toRef","searchResults","activatedResultIndex","activatedResultContentIndex","searchResult","hasResults","activatedResult","activePreviousResult","activeNextResult","activeNextResultContent","activePreviousResultContent","getVNodes","display","word","isString","getDisplay","formatterConfig","prefix","suffix","isPlainObject","resetSearchResult","onMounted","useEventListener","event","disableBodyScroll","onBeforeUnmount","clearAllBodyScrollLocks","historyIndex","RouterLink","contents","isCurrentResultActive","contentIndex","isCurrentContentActive"],"mappings":"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"}