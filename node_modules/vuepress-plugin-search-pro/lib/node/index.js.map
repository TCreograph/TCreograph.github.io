{"version":3,"file":"index.js","sources":["../../src/node/locales.ts","../../src/node/generateIndex.ts","../../src/node/prepare.ts","../../src/node/plugin.ts"],"sourcesContent":["import type { SearchProLocaleConfig } from \"../shared/index.js\";\n\n/** Multi language config for search-pro popup */\nexport const searchProLocales: SearchProLocaleConfig = {\n  \"/en/\": {\n    cancel: \"Cancel\",\n    placeholder: \"Search\",\n    search: \"Search\",\n    select: \"to select\",\n    navigate: \"to navigate\",\n    exit: \"to exit\",\n    history: \"Search History\",\n    emptyHistory: \"Empty Search History\",\n    emptyResult: \"No results found\",\n    loading: \"Loading search indexes...\",\n  },\n\n  \"/zh/\": {\n    cancel: \"取消\",\n    placeholder: \"搜索\",\n    search: \"搜索\",\n    select: \"选择\",\n    navigate: \"切换\",\n    exit: \"关闭\",\n    history: \"搜索历史\",\n    emptyHistory: \"无搜索历史\",\n    emptyResult: \"没有找到结果\",\n    loading: \"正在加载搜索索引...\",\n  },\n\n  \"/zh-tw/\": {\n    cancel: \"取消\",\n    placeholder: \"搜索\",\n    search: \"搜素\",\n    select: \"選擇\",\n    navigate: \"切換\",\n    exit: \"關閉\",\n    history: \"搜索歷史\",\n    emptyHistory: \"無搜索歷史\",\n    emptyResult: \"沒有找到結果\",\n    loading: \"正在加載搜索索引...\",\n  },\n\n  \"/de-at/\": {\n    cancel: \"Abbrechen\",\n    placeholder: \"Suche\",\n    search: \"Suche\",\n    select: \"auswählen\",\n    navigate: \"wechseln\",\n    exit: \"schließen\",\n    history: \"Suchverlauf\",\n    emptyHistory: \"Suchverlauf leeren\",\n    emptyResult: \"Keine Ergebnisse gefunden\",\n    loading: \"Suchindex wird geladen...\",\n  },\n\n  \"/vi/\": {\n    cancel: \"Hủy\",\n    placeholder: \"Tìm kiếm\",\n    search: \"Tìm kiếm\",\n    select: \"chọn\",\n    navigate: \"chuyển\",\n    exit: \"đóng\",\n    history: \"Lịch sử tìm kiếm\",\n    emptyHistory: \"Xóa lịch sử tìm kiếm\",\n    emptyResult: \"Không tìm thấy kết quả\",\n    loading: \"Đang tải chỉ mục tìm kiếm...\",\n  },\n\n  \"/uk/\": {\n    cancel: \"Скасувати\",\n    placeholder: \"Пошук\",\n    search: \"Пошук\",\n    select: \"вибрати\",\n    navigate: \"перейти\",\n    exit: \"закрити\",\n    history: \"Історія пошуку\",\n    emptyHistory: \"Очистити історію пошуку\",\n    emptyResult: \"Нічого не знайдено\",\n    loading: \"Завантаження пошукових індексів...\",\n  },\n\n  \"/ru/\": {\n    cancel: \"Отмена\",\n    placeholder: \"Поиск\",\n    search: \"Поиск\",\n    select: \"выбрать\",\n    navigate: \"переключить\",\n    exit: \"закрыть\",\n    history: \"История поиска\",\n    emptyHistory: \"Очистить историю поиска\",\n    emptyResult: \"Ничего не найдено\",\n    loading: \"Загрузка поисковых индексов...\",\n  },\n\n  \"/br/\": {\n    cancel: \"Cancelar\",\n    placeholder: \"Pesquisar\",\n    search: \"Pesquisar\",\n    select: \"selecionar\",\n    navigate: \"navegar\",\n    exit: \"fechar\",\n    history: \"Histórico de pesquisa\",\n    emptyHistory: \"Limpar histórico de pesquisa\",\n    emptyResult: \"Nenhum resultado encontrado\",\n    loading: \"Carregando índices de pesquisa...\",\n  },\n\n  \"/pl/\": {\n    cancel: \"Anuluj\",\n    placeholder: \"Szukaj\",\n    search: \"Szukaj\",\n    select: \"wybierz\",\n    navigate: \"przejdź\",\n    exit: \"zamknij\",\n    history: \"Historia wyszukiwania\",\n    emptyHistory: \"Wyczyść historię wyszukiwania\",\n    emptyResult: \"Nie znaleziono wyników\",\n    loading: \"Ładowanie indeksów wyszukiwania...\",\n  },\n\n  \"/sk/\": {\n    cancel: \"Zrušiť\",\n    placeholder: \"Hľadať\",\n    search: \"Hľadať\",\n    select: \"vybrať\",\n    navigate: \"prepnúť\",\n    exit: \"zavrieť\",\n    history: \"História vyhľadávania\",\n    emptyHistory: \"Vymazať históriu vyhľadávania\",\n    emptyResult: \"Nenašli sa žiadne výsledky\",\n    loading: \"Načítavajú sa vyhľadávacie indexy...\",\n  },\n\n  \"/fr/\": {\n    cancel: \"Annuler\",\n    placeholder: \"Rechercher\",\n    search: \"Rechercher\",\n    select: \"sélectionner\",\n    navigate: \"naviguer\",\n    exit: \"fermer\",\n    history: \"Historique de recherche\",\n    emptyHistory: \"Vider l'historique de recherche\",\n    emptyResult: \"Aucun résultat trouvé\",\n    loading: \"Chargement des index de recherche...\",\n  },\n\n  \"/es/\": {\n    cancel: \"Cancelar\",\n    placeholder: \"Buscar\",\n    search: \"Buscar\",\n    select: \"seleccionar\",\n    navigate: \"navegar\",\n    exit: \"cerrar\",\n    history: \"Historial de búsqueda\",\n    emptyHistory: \"Vaciar historial de búsqueda\",\n    emptyResult: \"No se encontraron resultados\",\n    loading: \"Cargando índices de búsqueda...\",\n  },\n\n  \"/ja/\": {\n    cancel: \"キャンセル\",\n    placeholder: \"検索\",\n    search: \"検索\",\n    select: \"選択\",\n    navigate: \"切り替え\",\n    exit: \"閉じる\",\n    history: \"検索履歴\",\n    emptyHistory: \"検索履歴をクリア\",\n    emptyResult: \"結果が見つかりません\",\n    loading: \"検索インデックスを読み込んでいます...\",\n  },\n\n  \"/tr/\": {\n    cancel: \"İptal\",\n    placeholder: \"Ara\",\n    search: \"Ara\",\n    select: \"seç\",\n    navigate: \"geç\",\n    exit: \"kapat\",\n    history: \"Arama geçmişi\",\n    emptyHistory: \"Arama geçmişini temizle\",\n    emptyResult: \"Sonuç bulunamadı\",\n    loading: \"Arama dizinleri yükleniyor...\",\n  },\n\n  \"/ko/\": {\n    cancel: \"취소\",\n    placeholder: \"검색\",\n    search: \"검색\",\n    select: \"선택\",\n    navigate: \"이동\",\n    exit: \"닫기\",\n    history: \"검색 기록\",\n    emptyHistory: \"검색 기록 지우기\",\n    emptyResult: \"결과를 찾을 수 없습니다\",\n    loading: \"검색 인덱스를 로드하는 중...\",\n  },\n\n  \"/fi/\": {\n    cancel: \"Peruuta\",\n    placeholder: \"Etsi\",\n    search: \"Etsi\",\n    select: \"valitaksesi\",\n    navigate: \"navigoidaksesi\",\n    exit: \"poistuaksesi\",\n    history: \"Hakuhistoria\",\n    emptyHistory: \"Tyhjennä hakuhistoria\",\n    emptyResult: \"Tuloksia ei löytynyt\",\n    loading: \"Ladataan hakuindeksiä...\",\n  },\n};\n","import { isArray } from \"@vuepress/shared\";\nimport { load } from \"cheerio\";\n\nimport type { Page } from \"@vuepress/core\";\nimport type { AnyNode } from \"cheerio\";\nimport type { SearchProCustomFieldOptions } from \"./options.js\";\nimport type { PageHeaderContent, PageIndex } from \"../shared/index.js\";\n\n/**\n * These tags are valid HTML tags which can contain content.\n */\n\n/**\n * @description h1 is removed because it's the title of the page.\n */\nconst HEADING_TAGS = \"h2,h3,h4,h5,h6\".split(\",\");\n\n/**\n * @description Not all the block tags are included, because some of them shall not be indexed\n */\nconst CONTENT_BLOCK_TAGS =\n  \"header,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,li,main,ol,p,ul,caption,table,thead,tbody,th,tr,td,datalist,fieldset,form,legend,optgroup,option,select,details,dialog,menu,menuitem,summary,blockquote,tfoot\".split(\n    \",\"\n  );\n\n/**\n * @description Not all the inline tags are included, because some of them shall not be indexed, e.g.: pre\n *\n * routerlink is added to the list, because it is a special link tag\n */\nconst CONTENT_INLINE_TAGS =\n  \"routerlink,a,b,abbr,bdi,bdo,cite,code,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,del,ins,button,label,legend,meter,optgroup,option,output,progress,select\".split(\n    \",\"\n  );\n\nconst $ = load(\"\");\n\nexport const generatePageIndex = (\n  page: Page<{ excerpt?: string }>,\n  customFieldsGetter: SearchProCustomFieldOptions[] = [],\n  indexContent = false\n): PageIndex | null => {\n  const hasExcerpt = \"excerpt\" in page.data && page.data[\"excerpt\"].length;\n\n  const result: PageIndex = {\n    title: page.title,\n    contents: [],\n  };\n\n  // here are some variables holding the current state of the parser\n  let shouldIndexContent = hasExcerpt || indexContent;\n  let currentContent = \"\";\n  let currentHeaderContent: PageHeaderContent = {\n    header: \"\",\n    slug: \"\",\n    contents: [],\n  };\n  let isContentBeforeFirstHeader = true;\n\n  const render = (node: AnyNode): void => {\n    if (node.type === \"tag\") {\n      if (HEADING_TAGS.includes(node.name)) {\n        if (currentContent && shouldIndexContent) {\n          // add last content\n          currentHeaderContent?.contents.push(\n            currentContent.replace(/\\s+/gu, \" \")\n          );\n          currentContent = \"\";\n        }\n\n        // content before first header does not belong to any header\n        if (isContentBeforeFirstHeader) {\n          // the content before the first header shall have actual contents\n          if (currentHeaderContent.contents.length)\n            result.contents.push(currentHeaderContent);\n\n          isContentBeforeFirstHeader = false;\n        } else result.contents.push(currentHeaderContent);\n\n        // update header\n        currentHeaderContent = {\n          header: node.children\n            .map((node) => (node.type === \"text\" ? node.data : \"\"))\n            .join(\"\")\n            .trim(),\n          slug: node.attribs[\"id\"],\n          contents: [],\n        };\n      } else if (CONTENT_BLOCK_TAGS.includes(node.name)) {\n        if (currentContent && shouldIndexContent) {\n          // add last content\n          currentHeaderContent?.contents.push(\n            currentContent.replace(/\\s+/gu, \" \")\n          );\n          currentContent = \"\";\n        }\n        node.childNodes.forEach(render);\n      } else if (CONTENT_INLINE_TAGS.includes(node.name))\n        node.childNodes.forEach(render);\n    } else if (node.type === \"text\")\n      currentContent += node.data.trim() ? node.data : \"\";\n    else if (\n      // we are expecting to stop at excerpt marker\n      hasExcerpt &&\n      !indexContent &&\n      // we got excerpt marker\n      node.type === \"comment\" &&\n      node.data.trim() === \"more\"\n    ) {\n      shouldIndexContent = false;\n    }\n  };\n\n  const nodes = $.parseHTML(page.contentRendered);\n\n  // get custom fields\n  const customFields = Object.fromEntries(\n    customFieldsGetter\n      .map(({ getter }, index) => {\n        const result = getter(page);\n\n        return isArray(result)\n          ? [index.toString(), result]\n          : result\n          ? [index.toString(), [result]]\n          : null;\n      })\n      .filter((item): item is [string, string[]] => item !== null)\n  );\n\n  // no content in page and no customFields\n  if (!nodes?.length && !Object.keys(customFields).length) return null;\n\n  // walk through nodes and extract indexes\n  nodes?.forEach((node) => {\n    render(node);\n  });\n\n  // push contents in last block tags\n  if (shouldIndexContent && currentContent)\n    currentHeaderContent?.contents.push(currentContent);\n\n  // push last content\n  if (currentHeaderContent.contents.length)\n    result.contents.push(currentHeaderContent);\n\n  return {\n    ...result,\n    ...(Object.keys(customFields).length ? { customFields } : {}),\n  };\n};\n","import { getPageExcerpt, utoa } from \"vuepress-shared/node\";\nimport { generatePageIndex } from \"./generateIndex.js\";\n\nimport type { App, Page } from \"@vuepress/core\";\nimport type { SearchProOptions } from \"./options.js\";\nimport type { PageIndex, SearchIndex } from \"../shared/index.js\";\n\nconst HMR_CODE = `\nif (import.meta.webpackHot) {\n  import.meta.webpackHot.accept()\n  if (__VUE_HMR_RUNTIME__.updateSearchProDatabase)\n    __VUE_HMR_RUNTIME__.updateSearchProDatabase(database)\n}\n\nif (import.meta.hot) {\n  import.meta.hot.accept(({ database }) => {\n    __VUE_HMR_RUNTIME__.updateSearchProDatabase(database);\n  })\n}\n`;\n\nlet previousSearchIndex: SearchIndex | null = null;\n\nexport const prepareSearchIndex = async (\n  app: App,\n  options: SearchProOptions,\n  isBlogPluginEnabled = false\n): Promise<void> => {\n  const { pages } = app;\n  const hasExcerpt =\n    isBlogPluginEnabled || pages.some((page) => \"excerpt\" in page.data);\n\n  if (!hasExcerpt)\n    pages.forEach((page: Page<{ excerpt?: string }>) => {\n      page.data[\"excerpt\"] = getPageExcerpt(app, page, { excerptLength: 0 });\n    });\n\n  const pagesSearchIndex = pages\n    .map((page) => {\n      const pageIndex = generatePageIndex(\n        page,\n        options.customFields,\n        options.indexContent\n      );\n\n      return pageIndex\n        ? { path: page.path, index: pageIndex, localePath: page.pathLocale }\n        : null;\n    })\n    .filter(\n      (item): item is { path: string; index: PageIndex; localePath: string } =>\n        item !== null\n    );\n\n  const searchIndex = Object.fromEntries(\n    Object.keys(\n      // locales should at least have root locales\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      { \"/\": {}, ...app.options.locales }\n    ).map((localePath) => [\n      localePath,\n      Object.fromEntries(\n        pagesSearchIndex\n          .filter((item) => item.localePath === localePath)\n          .map((item) => [item.path, item.index])\n      ),\n    ])\n  );\n\n  previousSearchIndex = searchIndex;\n\n  // search index file content\n  let content = `\\\nexport const database = \"${utoa(JSON.stringify(searchIndex))}\"\n`;\n\n  // inject HMR code\n  if (app.env.isDev) content += HMR_CODE;\n\n  await app.writeTemp(\"search-pro/index.js\", content);\n};\n\nexport const updateSearchIndex = async (\n  app: App,\n  options: SearchProOptions,\n  path: string\n): Promise<void> => {\n  if (previousSearchIndex) {\n    const actualPath = path\n      .replace(/^pages\\//, \"\")\n      .replace(/\\/index\\.html\\.vue/, \"/readme.md\")\n      .replace(/\\.html\\.vue/, \".md\");\n\n    const { env, pages, writeTemp } = app;\n\n    const page = pages.find(\n      ({ filePathRelative }) =>\n        filePathRelative?.toLowerCase() === actualPath.toLowerCase()\n    )!;\n\n    if (page) {\n      const pageIndex = generatePageIndex(\n        page,\n        options.customFields,\n        options.indexContent\n      );\n\n      // update index\n      if (pageIndex) {\n        previousSearchIndex[page.pathLocale][page.path] = pageIndex;\n\n        // search index file content\n        let content = `\\\nexport const database = \"${utoa(JSON.stringify(previousSearchIndex))}\"\n`;\n\n        // inject HMR code\n        if (env.isDev) content += HMR_CODE;\n\n        await writeTemp(\"search-pro/index.js\", content);\n\n        return;\n      }\n    }\n  }\n\n  await prepareSearchIndex(app, options);\n};\n\nexport const removeSearchIndex = async (\n  app: App,\n  options: SearchProOptions,\n  path: string\n): Promise<void> => {\n  if (previousSearchIndex) {\n    const actualPath = path\n      .replace(/^pages\\//, \"\")\n      .replace(/\\/index\\.html\\.vue/, \"/readme.md\")\n      .replace(/\\.html\\.vue/, \".md\");\n\n    const { env, pages, writeTemp } = app;\n\n    const page = pages.find(\n      ({ filePathRelative }) =>\n        filePathRelative?.toLowerCase() === actualPath.toLowerCase()\n    )!;\n\n    if (page) {\n      // remove index\n      delete previousSearchIndex[page.pathLocale][page.path];\n\n      // search index file content\n      let content = `\\\nexport const database = \"${utoa(JSON.stringify(previousSearchIndex))}\"\n`;\n\n      // inject HMR code\n      if (env.isDev) content += HMR_CODE;\n\n      await writeTemp(\"search-pro/index.js\", content);\n\n      return;\n    }\n  }\n\n  await prepareSearchIndex(app, options);\n};\n","import { getDirname, path } from \"@vuepress/utils\";\nimport { watch } from \"chokidar\";\nimport { useSassPalettePlugin } from \"vuepress-plugin-sass-palette\";\nimport { addViteSsrNoExternal, getLocales } from \"vuepress-shared/node\";\nimport { searchProLocales } from \"./locales.js\";\nimport {\n  prepareSearchIndex,\n  removeSearchIndex,\n  updateSearchIndex,\n} from \"./prepare.js\";\n\nimport type { PluginFunction } from \"@vuepress/core\";\nimport type { SearchProOptions } from \"./options.js\";\n\nconst __dirname = getDirname(import.meta.url);\n\nexport const searchProPlugin =\n  (options: SearchProOptions): PluginFunction =>\n  (app) => {\n    useSassPalettePlugin(app, { id: \"hope\" });\n\n    const isBlogPluginEnabled = app.pluginApi.plugins.some(\n      ({ name }) => name === \"vuepress-plugin-blog2\"\n    );\n\n    return {\n      name: \"vuepress-plugin-search-pro\",\n\n      alias: {\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        \"vuepress-plugin-search-pro/result\": path.resolve(\n          __dirname,\n          \"../client/components/SearchResult.js\"\n        ),\n      },\n\n      define: {\n        SEARCH_PRO_CUSTOM_FIELDS: Object.fromEntries(\n          (options.customFields || [])\n            .map(({ formatter }, index) =>\n              formatter ? [index.toString(), formatter] : null\n            )\n            .filter((item): item is [string, string] => item !== null)\n        ),\n        SEARCH_PRO_DELAY: options.delay || 300,\n        SEARCH_PRO_HISTORY_COUNT: options.historyCount || 5,\n        SEARCH_PRO_HOTKEYS: options.hotKeys || [{ key: \"k\", ctrl: true }],\n        SEARCH_PRO_LOCALES: getLocales({\n          app,\n          name: \"search-pro\",\n          config: options.locales,\n          default: searchProLocales,\n        }),\n      },\n\n      clientConfigFile: path.resolve(__dirname, \"../client/config.js\"),\n\n      extendsBundlerOptions: (bundlerOptions: unknown, app): void => {\n        addViteSsrNoExternal(bundlerOptions, app, [\n          \"fflate\",\n          \"vuepress-shared\",\n        ]);\n      },\n\n      onPrepared: (app): Promise<void> =>\n        prepareSearchIndex(app, options, isBlogPluginEnabled),\n\n      onWatched: (app, watchers): void => {\n        const hotReload =\n          \"hotReload\" in options ? options.hotReload : app.env.isDebug;\n\n        if (hotReload) {\n          // this ensure the page is generated or updated\n          const searchIndexWatcher = watch(\"pages/**/*.vue\", {\n            cwd: app.dir.temp(),\n            ignoreInitial: true,\n          });\n\n          searchIndexWatcher.on(\"add\", (path) => {\n            void updateSearchIndex(app, options, path);\n          });\n          searchIndexWatcher.on(\"change\", (path) => {\n            void updateSearchIndex(app, options, path);\n          });\n          searchIndexWatcher.on(\"unlink\", (path) => {\n            void removeSearchIndex(app, options, path);\n          });\n\n          watchers.push(searchIndexWatcher);\n        }\n      },\n    };\n  };\n"],"names":["searchProLocales","HEADING_TAGS","CONTENT_BLOCK_TAGS","CONTENT_INLINE_TAGS","$","load","generatePageIndex","page","customFieldsGetter","indexContent","hasExcerpt","result","shouldIndexContent","currentContent","currentHeaderContent","isContentBeforeFirstHeader","render","node","nodes","customFields","getter","index","isArray","item","HMR_CODE","previousSearchIndex","prepareSearchIndex","app","options","isBlogPluginEnabled","pages","getPageExcerpt","pagesSearchIndex","pageIndex","searchIndex","localePath","content","utoa","updateSearchIndex","path","actualPath","env","writeTemp","filePathRelative","removeSearchIndex","__dirname","getDirname","searchProPlugin","useSassPalettePlugin","name","formatter","getLocales","bundlerOptions","addViteSsrNoExternal","watchers","searchIndexWatcher","watch"],"mappings":"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"}