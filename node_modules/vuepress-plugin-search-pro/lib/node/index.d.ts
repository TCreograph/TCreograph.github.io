import { Page, LocaleConfig, PluginFunction } from '@vuepress/core';
import { RequiredLocaleConfig } from 'vuepress-shared';

interface PageHeaderContent {
    header: string;
    slug: string;
    contents: string[];
}
interface PageIndex {
    title: string;
    contents: PageHeaderContent[];
    customFields?: Record<string, string[]>;
}
type LocaleIndex = Record<string, PageIndex>;
type SearchIndex = Record<string, LocaleIndex>;

type SearchProCustomFieldFormatter = string | Record<string, string>;

interface SearchProHotKeyOptions {
    /**
     * Value of `event.key` to trigger the hot key
     *
     * 热键的 `event.key` 值
     */
    key: string;
    /**
     * Whether to press `event.altKey` at the same time
     *
     * 是否同时按下 `event.altKey`
     *
     * @default false
     */
    alt?: boolean;
    /**
     * Whether to press `event.ctrlKey` at the same time
     *
     * 是否同时按下 `event.ctrlKey`
     *
     * @default false
     */
    ctrl?: boolean;
    /**
     * Whether to press `event.shiftKey` at the same time
     *
     * 是否同时按下 `event.shiftKey`
     *
     * @default false
     */
    shift?: boolean;
}

/**
 * Multi language config for `vuepress-plugin-search-pro` plugin
 *
 * `vuepress-plugin-search-pro` 插件的多语言配置
 */
interface SearchProLocaleData {
    /**
     * Search box placeholder
     *
     * 搜索框占位符文字
     */
    placeholder: string;
    /**
     * Search text
     *
     * 搜素文字
     */
    search: string;
    /**
     * Cancel text
     *
     * 取消文字
     */
    cancel: string;
    /**
     * Select hint
     *
     * 选择提示
     */
    select: string;
    /**
     * Choose hint
     *
     * 选择提示
     */
    navigate: string;
    /**
     * Close hint
     *
     * 关闭提示
     */
    exit: string;
    /**
     * Loading hint
     *
     * 加载提示
     */
    loading: string;
    /**
     * Search history text
     *
     * 搜索历史文字
     */
    history: string;
    /**
     * Search history empty hint
     *
     * 无搜索历史提示
     */
    emptyHistory: string;
    /**
     * Empty hint
     *
     * 无结果提示
     */
    emptyResult: string;
}
type SearchProLocaleConfig = RequiredLocaleConfig<SearchProLocaleData>;

interface SearchProCustomFieldOptions {
    /**
     * Custom field getter
     *
     * 自定义项目的获取器
     */
    getter: (page: Page) => string | string[] | null;
    /**
     * Display content
     *
     * @description `$content` will be replaced by the content returned by `getter`
     *
     * 展示的内容
     *
     * @description `$content` 会被 `getter` 返回的内容替换
     *
     * @default `$content`
     */
    formatter?: SearchProCustomFieldFormatter;
}
interface SearchProOptions {
    /**
     * Whether index page content
     *
     * @description By default only headings and excerpt of the page will be indexed, and the content of the page will not be indexed. If you need to index the content of the page, you can set this option to `true`
     *
     * 是否索引正文内容
     *
     * @description 默认情况下，只会索引页面的标题和摘要，不会索引页面的正文内容。如果需要索引页面的正文内容，可以将该选项设置为 `true`
     *
     * @default false
     */
    indexContent?: boolean;
    /**
     * Max stored history item count
     *
     * 存储历史项目的最大数量
     *
     * @default 5
     */
    historyCount?: number;
    /**
     * Delay to start searching after input
     *
     * 结束输入到开始搜索的延时
     *
     * @default 300
     */
    delay?: number;
    /**
     * Custom field for search
     */
    customFields?: SearchProCustomFieldOptions[];
    /**
     * Specify the [event.key](http://keycode.info/) of the hotkeys
     *
     * @description When hotkeys are pressed, the search box input will be focused. Set to an empty array to disable hotkeys
     *
     * 指定热键的 [event.key](http://keycode.info/)
     *
     * @description 当热键被按下时，搜索框的输入框会被聚焦，设置为空数组以禁用热键
     *
     * @default [{key: 'k', ctrl: true}]
     */
    hotKeys?: SearchProHotKeyOptions[];
    /**
     * Whether enable hmr
     *
     * 是否启用 hmr
     *
     * @default false
     */
    hotReload?: boolean;
    /**
     * Locales config
     *
     * @see [default config](https://github.com/vuepress-theme-hope/vuepress-theme-hope/blob/main/packages/search-pro/src/node/locales.ts)
     *
     * 多语言选项
     *
     * @see [默认配置](https://github.com/vuepress-theme-hope/vuepress-theme-hope/blob/main/packages/search-pro/src/node/locales.ts)
     */
    locales?: LocaleConfig<SearchProLocaleData>;
}

declare const searchProPlugin: (options: SearchProOptions) => PluginFunction;

export { LocaleIndex, PageHeaderContent, PageIndex, SearchIndex, SearchProCustomFieldFormatter, SearchProCustomFieldOptions, SearchProHotKeyOptions, SearchProLocaleConfig, SearchProLocaleData, SearchProOptions, searchProPlugin };
