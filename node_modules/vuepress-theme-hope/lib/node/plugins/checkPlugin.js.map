{"version":3,"file":"checkPlugin.js","sourceRoot":"","sources":["../../../src/node/plugins/checkPlugin.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzC,OAAO,EAAE,IAAI,EAAE,MAAM,sBAAsB,CAAC;AAC5C,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;AAKrC,MAAM,gBAAgB,GAAG;IACvB,CAAC,sCAAsC,EAAE,mBAAmB,CAAC;IAC7D,6BAA6B;IAC7B,CAAC,0BAA0B,EAAE,SAAS,CAAC;IACvC,CAAC,4BAA4B,EAAE,YAAY,CAAC;IAC5C,CAAC,4BAA4B,EAAE,UAAU,CAAC;IAC1C,CAAC,4BAA4B,EAAE,WAAW,CAAC;IAC3C,CAAC,uBAAuB,EAAE,MAAM,CAAC;IACjC,CAAC,4BAA4B,EAAE,WAAW,CAAC;IAC3C,CAAC,6BAA6B,EAAE,YAAY,CAAC;IAC7C,CAAC,sBAAsB,EAAE,KAAK,CAAC;IAC/B,CAAC,sBAAsB,EAAE,KAAK,CAAC;IAC/B,CAAC,yBAAyB,EAAE,SAAS,CAAC;CACvC,CAAC;AAEF,MAAM,mBAAmB,GAAG;IAC1B,mBAAmB;IACnB,aAAa;IACb,MAAM;IACN,YAAY;IACZ,SAAS;IACT,UAAU;IACV,WAAW;IACX,kBAAkB;IAClB,MAAM;IACN,KAAK;IACL,WAAW;IACX,WAAW;IACX,YAAY;IACZ,SAAS;IACT,KAAK;IACL,aAAa;IACb,KAAK;IACL,SAAS;CACV,CAAC;AAEF;;;;GAIG;AACH,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,GAAQ,EAAE,OAAuB,EAAQ,EAAE;IACtE,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU,EAAE,UAAU,GAAG,EAAE,CAAC,EAAE,EAAE;QACzD,IAAI,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,IAAI,KAAK,UAAU,CAAC;YAC/D,MAAM,CAAC,KAAK,CACV,WAAW,MAAM,CAAC,OAAO,CACvB,UAAU,CACX,8EAA8E,MAAM,CAAC,IAAI,CACxF,sBAAsB,CACvB,MACC,UAAU;gBACR,CAAC,CAAC,QAAQ,MAAM,CAAC,OAAO,CAAC,UAAU,UAAU,EAAE,CAAC,QAAQ,MAAM,CAAC,IAAI,CAC/D,eAAe,CAChB,oBAAoB;gBACvB,CAAC,CAAC,EACN,EAAE,CACH,CAAC;IACN,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;QAC5B,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,GAAG,CAAC;YACpC,MAAM,CAAC,IAAI,CACT,oBAAoB,MAAM,CAAC,OAAO,CAChC,WAAW,GAAG,EAAE,CACjB,eAAe,MAAM,CAAC,IAAI,CACzB,eAAe,CAChB,mHAAmH,MAAM,CAAC,OAAO,CAChI,SAAS,CACV,gBAAgB,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,YAAY,CACjE,CAAC;IACN,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAEF;;;;GAIG;AACH,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,GAAQ,EAAQ,EAAE;IAChD,MAAM,EAAE,OAAO,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;IAElC,MAAM,KAAK,GAAG,OAAO,CAAC,SAAS,CAC7B,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,KAAK,sBAAsB,CACnD,CAAC;IAEF,IAAI,KAAK,KAAK,CAAC,CAAC;QAAE,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC3D,CAAC,CAAC","sourcesContent":["import { colors } from \"@vuepress/utils\";\nimport { keys } from \"vuepress-shared/node\";\nimport { logger } from \"../utils.js\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { PluginsOptions } from \"../../shared/index.js\";\n\nconst PLUGIN_CHECKLIST = [\n  [\"@vuepress/plugin-active-header-links\", \"activeHeaderLinks\"],\n  \"@vuepress/plugin-theme-data\",\n  [\"vuepress-plugin-comment2\", \"comment\"],\n  [\"vuepress-plugin-components\", \"components\"],\n  [\"vuepress-plugin-copy-code2\", \"copyCode\"],\n  [\"vuepress-plugin-copyright2\", \"copyright\"],\n  [\"vuepress-plugin-feed2\", \"feed\"],\n  [\"vuepress-plugin-md-enhance\", \"mdEnhance\"],\n  [\"vuepress-plugin-photo-swipe\", \"photoSwipe\"],\n  [\"vuepress-plugin-pwa2\", \"pwa\"],\n  [\"vuepress-plugin-seo2\", \"seo\"],\n  [\"vuepress-plugin-sitemap\", \"sitemap\"],\n];\n\nconst KNOWN_THEME_PLUGINS = [\n  \"activeHeaderLinks\",\n  \"autoCatalog\",\n  \"blog\",\n  \"components\",\n  \"comment\",\n  \"copyCode\",\n  \"copyright\",\n  \"externalLinkIcon\",\n  \"feed\",\n  \"git\",\n  \"mdEnhance\",\n  \"nprogress\",\n  \"photoSwipe\",\n  \"prismjs\",\n  \"pwa\",\n  \"readingTime\",\n  \"seo\",\n  \"sitemap\",\n];\n\n/**\n * Check plugin options for noob users\n *\n * @description Should be invoke on node side\n */\nexport const checkPlugins = (app: App, plugins: PluginsOptions): void => {\n  PLUGIN_CHECKLIST.forEach(([pluginName, optionName = \"\"]) => {\n    if (app.pluginApi.plugins.some(({ name }) => name === pluginName))\n      logger.error(\n        `Plugin \"${colors.magenta(\n          pluginName\n        )}\" is used by theme, so you are not allowed to call this plugin yourself in ${colors.cyan(\n          \"vuepress config file\"\n        )} . ${\n          optionName\n            ? `Set \"${colors.magenta(`plugin.${optionName}`)}\" in ${colors.cyan(\n                \"theme options\"\n              )}, to customize it.`\n            : \"\"\n        }`\n      );\n  });\n\n  keys(plugins).forEach((key) => {\n    if (!KNOWN_THEME_PLUGINS.includes(key))\n      logger.warn(\n        `You are setting \"${colors.magenta(\n          `plugins.${key}`\n        )}\" option in ${colors.cyan(\n          \"theme options\"\n        )}, but it's not supported by theme. You need to install the plugin yourself and import then call it manually in \"${colors.magenta(\n          \"plugins\"\n        )}\" options in ${colors.cyan(\"vuepress config file\")} directly.`\n      );\n  });\n};\n\n/**\n * Composition Api to remove `@vuepress/plugin-git`\n *\n * @description Should be invoke on node side\n */\nexport const removeGitPlugin = (app: App): void => {\n  const { plugins } = app.pluginApi;\n\n  const index = plugins.findIndex(\n    (plugin) => plugin.name === \"@vuepress/plugin-git\"\n  );\n\n  if (index !== -1) app.pluginApi.plugins.splice(index, 1);\n};\n"]}