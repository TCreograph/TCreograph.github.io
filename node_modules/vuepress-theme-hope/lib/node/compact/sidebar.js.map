{"version":3,"file":"sidebar.js","sourceRoot":"","sources":["../../../src/node/compact/sidebar.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,kBAAkB,CAAC;AACpE,OAAO,EAAE,gBAAgB,EAAE,aAAa,EAAE,MAAM,YAAY,CAAC;AAC7D,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;AAQrC,MAAM,yBAAyB,GAAG,CAAC,MAAiB,EAAuB,EAAE,CAC3E,MAAM;KACH,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;IACZ,IAAI,QAAQ,CAAC,IAAI,CAAC;QAAE,OAAO,IAAI,CAAC;IAEhC,IAAI,aAAa,CAAC,IAAI,CAAC,EAAE;QACvB,MAAM,aAAa,GAAuB;YACxC,CAAC,OAAO,EAAE,MAAM,CAAC;YACjB,CAAC,MAAM,EAAE,MAAM,CAAC;YAChB,CAAC,aAAa,EAAE,aAAa,CAAC;SAC/B,CAAC;QAEF,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,gBAAgB,EAAE,SAAS,CAAC,EAAE,EAAE,CACtD,gBAAgB,CAAC;YACf,OAAO,EAAE,IAA+B;YACxC,gBAAgB;YAChB,SAAS;YACT,KAAK,EAAE,SAAS;SACjB,CAAC,CACH,CAAC;QAEF,aAAa,CACX,IAA+B,EAC/B,cAAc,EACd,kBAAkB,CACnB,CAAC;QAEF,aAAa;QACb,IAAI,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;YACxB,aAAa;YACb,yBAAyB,CAAC,IAAI,CAAC,QAAqB,CAAC,CAAC;QAExD,OAAO,IAAmB,CAAC;KAC5B;IAED,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;KACD,MAAM,CAAC,CAAC,IAAI,EAAuB,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;AAE1D;;GAEG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAAG,CACnC,MAAe,EACS,EAAE;IAC1B,IAAI,MAAM,KAAK,KAAK;QAAE,OAAO,KAAK,CAAC;IACnC,IAAI,OAAO,CAAC,MAAM,CAAC;QAAE,OAAO,yBAAyB,CAAC,MAAM,CAAC,CAAC;IAE9D,IAAI,aAAa,CAAC,MAAM,CAAC,IAAI,MAAM;QACjC,OAAO,MAAM,CAAC,WAAW,CACvB,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAExB,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE;YACjB,IAAI,OAAO,CAAC,KAAK,CAAC;gBAAE,OAAO,CAAC,GAAG,EAAE,yBAAyB,CAAC,KAAK,CAAC,CAAC,CAAC;YAEnE,IAAI,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,KAAK;gBAC1C,OAAO,CAAC,GAAG,EAAuB,KAAK,CAAC,CAAC;YAE3C,MAAM,CAAC,KAAK,CACV,oFAAoF,CACrF,CAAC;YAEF,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QACtB,CAAC,CAAC,CACH,CAAC;IAEJ,MAAM,CAAC,KAAK,CAAC,+CAA+C,CAAC,CAAC;IAE9D,OAAO,KAAK,CAAC;AACf,CAAC,CAAC","sourcesContent":["import { isArray, isPlainObject, isString } from \"@vuepress/shared\";\nimport { deprecatedLogger, droppedLogger } from \"./utils.js\";\nimport { logger } from \"../utils.js\";\n\nimport type {\n  SidebarArrayOptions,\n  SidebarItem,\n  SidebarOptions,\n} from \"../../shared/index.js\";\n\nconst handleArraySidebarOptions = (config: unknown[]): SidebarArrayOptions =>\n  config\n    .map((item) => {\n      if (isString(item)) return item;\n\n      if (isPlainObject(item)) {\n        const convertConfig: [string, string][] = [\n          [\"title\", \"text\"],\n          [\"path\", \"link\"],\n          [\"collapsable\", \"collapsible\"],\n        ];\n\n        convertConfig.forEach(([deprecatedOption, newOption]) =>\n          deprecatedLogger({\n            options: item as Record<string, unknown>,\n            deprecatedOption,\n            newOption,\n            scope: \"sidebar\",\n          })\n        );\n\n        droppedLogger(\n          item as Record<string, unknown>,\n          \"sidebarDepth\",\n          \"Found in sidebar\"\n        );\n\n        // @ts-ignore\n        if (isArray(item.children))\n          // @ts-ignore\n          handleArraySidebarOptions(item.children as unknown[]);\n\n        return item as SidebarItem;\n      }\n\n      return null;\n    })\n    .filter((item): item is SidebarItem => item !== null);\n\n/**\n * @deprecated You should use V2 standard sidebar config and avoid using it\n */\nexport const convertSidebarOptions = (\n  config: unknown\n): SidebarOptions | false => {\n  if (config === false) return false;\n  if (isArray(config)) return handleArraySidebarOptions(config);\n\n  if (isPlainObject(config) && config)\n    return Object.fromEntries(\n      Object.entries(config).map<\n        [string, SidebarArrayOptions | \"structure\" | false]\n      >(([key, value]) => {\n        if (isArray(value)) return [key, handleArraySidebarOptions(value)];\n\n        if (value === \"structure\" || value === false)\n          return [key, <\"structure\" | false>value];\n\n        logger.error(\n          '\"sidebar\" value should be an array, \"structure\" or false when setting as an object'\n        );\n\n        return [key, false];\n      })\n    );\n\n  logger.error('\"sidebar\" config should be an array or object');\n\n  return false;\n};\n"]}