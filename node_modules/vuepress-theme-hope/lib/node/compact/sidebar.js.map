{"version":3,"file":"sidebar.js","sourceRoot":"","sources":["../../../src/node/compact/sidebar.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,kBAAkB,CAAC;AACpE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,sBAAsB,CAAC;AAE5D,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzC,OAAO,EAAE,gBAAgB,EAAE,aAAa,EAAE,MAAM,YAAY,CAAC;AAC7D,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;AAQrC,MAAM,yBAAyB,GAAG,CAChC,MAA2B,EACN,EAAE,CACvB,MAAM;KACH,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;IACZ,IAAI,QAAQ,CAAC,IAAI,CAAC;QAAE,OAAO,IAAI,CAAC;IAEhC,IAAI,aAAa,CAAC,IAAI,CAAC,EAAE;QACvB,MAAM,aAAa,GAAuB;YACxC,CAAC,OAAO,EAAE,MAAM,CAAC;YACjB,CAAC,MAAM,EAAE,MAAM,CAAC;YAChB,CAAC,aAAa,EAAE,aAAa,CAAC;SAC/B,CAAC;QAEF,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,gBAAgB,EAAE,SAAS,CAAC,EAAE,EAAE,CACtD,gBAAgB,CAAC;YACf,aAAa;YACb,OAAO,EAAE,IAAI;YACb,gBAAgB;YAChB,SAAS;YACT,KAAK,EAAE,SAAS;SACjB,CAAC,CACH,CAAC;QAEF,aAAa;QACb,aAAa,CAAC,IAAI,EAAE,cAAc,EAAE,kBAAkB,CAAC,CAAC;QAExD,IAAI,UAAU,IAAI,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC9C,yBAAyB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAE3C,OAAO,IAAmB,CAAC;KAC5B;IAED,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;KACD,MAAM,CAAC,CAAC,IAAI,EAAuB,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;AAE1D;;GAEG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAAG,CACnC,MAAgC,EACR,EAAE;IAC1B,IAAI,MAAM,KAAK,KAAK,IAAI,MAAM,KAAK,WAAW;QAAE,OAAO,MAAM,CAAC;IAE9D,IAAI,OAAO,CAAC,MAAM,CAAC;QACjB,OAAO,yBAAyB,CAAC,MAA6B,CAAC,CAAC;IAElE,IAAI,aAAa,CAAC,MAAM,CAAC,IAAI,MAAM;QACjC,OAAO,WAAW,CAChB,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAEjB,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE;YACjB,IAAI,OAAO,CAAC,KAAK,CAAC;gBAChB,OAAO,CAAC,GAAG,EAAE,yBAAyB,CAAC,KAA4B,CAAC,CAAC,CAAC;YAExE,IAAI,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,KAAK;gBACjE,OAAO,CAAC,GAAG,EAAmC,KAAK,CAAC,CAAC;YAEvD,MAAM,CAAC,KAAK,CACV,+FAA+F,CAChG,CAAC;YAEF,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QACtB,CAAC,CAAC,CACH,CAAC;IAEJ,MAAM,CAAC,KAAK,CACV,GAAG,MAAM,CAAC,OAAO,CACf,SAAS,CACV,yEAAyE,CAC3E,CAAC;IAEF,OAAO,KAAK,CAAC;AACf,CAAC,CAAC","sourcesContent":["import { isArray, isPlainObject, isString } from \"@vuepress/shared\";\nimport { entries, fromEntries } from \"vuepress-shared/node\";\n\nimport { colors } from \"@vuepress/utils\";\nimport { deprecatedLogger, droppedLogger } from \"./utils.js\";\nimport { logger } from \"../utils.js\";\n\nimport type {\n  SidebarArrayOptions,\n  SidebarItem,\n  SidebarOptions,\n} from \"../../shared/index.js\";\n\nconst handleArraySidebarOptions = (\n  config: SidebarArrayOptions\n): SidebarArrayOptions =>\n  config\n    .map((item) => {\n      if (isString(item)) return item;\n\n      if (isPlainObject(item)) {\n        const convertConfig: [string, string][] = [\n          [\"title\", \"text\"],\n          [\"path\", \"link\"],\n          [\"collapsable\", \"collapsible\"],\n        ];\n\n        convertConfig.forEach(([deprecatedOption, newOption]) =>\n          deprecatedLogger({\n            // @ts-ignore\n            options: item,\n            deprecatedOption,\n            newOption,\n            scope: \"sidebar\",\n          })\n        );\n\n        // @ts-ignore\n        droppedLogger(item, \"sidebarDepth\", \"Found in sidebar\");\n\n        if (\"children\" in item && isArray(item.children))\n          handleArraySidebarOptions(item.children);\n\n        return item as SidebarItem;\n      }\n\n      return null;\n    })\n    .filter((item): item is SidebarItem => item !== null);\n\n/**\n * @deprecated You should use V2 standard sidebar config and avoid using it\n */\nexport const convertSidebarOptions = (\n  config: SidebarOptions | unknown\n): SidebarOptions | false => {\n  if (config === false || config === \"structure\") return config;\n\n  if (isArray(config))\n    return handleArraySidebarOptions(config as SidebarArrayOptions);\n\n  if (isPlainObject(config) && config)\n    return fromEntries(\n      entries(config).map<\n        [string, SidebarArrayOptions | \"structure\" | \"heading\" | false]\n      >(([key, value]) => {\n        if (isArray(value))\n          return [key, handleArraySidebarOptions(value as SidebarArrayOptions)];\n\n        if (value === \"structure\" || value === \"heading\" || value === false)\n          return [key, <\"structure\" | \"heading\" | false>value];\n\n        logger.error(\n          '\"sidebar\" value should be an array, \"structure\", \"heading\" or false when setting as an object'\n        );\n\n        return [key, false];\n      })\n    );\n\n  logger.error(\n    `${colors.magenta(\n      \"sidebar\"\n    )} config should be: an array, an object, \"structure\", \"heading\" or false`\n  );\n\n  return false;\n};\n"]}