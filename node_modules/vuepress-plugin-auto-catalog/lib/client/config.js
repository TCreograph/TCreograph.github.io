import{useSiteData as b,defineClientConfig as L}from"@vuepress/client";import{defineComponent as x,computed as y,h as n}from"vue";import{useLocaleConfig as U,startsWith as _,keys as k,endsWith as d,hasGlobalComponent as w}from"vuepress-shared/client";import{useRoute as R,useRouter as I,RouterLink as A}from"vue-router";import g from"vuepress-plugin-components/client/components/FontIcon.js";import"./styles/auto-catalog.scss";var M=x({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},titleGetter:{type:Function,default:l=>l.title},iconGetter:{type:Function,default:l=>l.icon},orderGetter:{type:Function,default:l=>l.order||0},shouldIndex:{type:Function,default:l=>l.index!==!1}},setup(l){const f=U(AUTO_CATALOG_LOCALES),s=R(),C=I(),T=b(),$=()=>{const u=l.base||s.path.replace(/\/[^/]+$/,"/"),m=C.getRoutes(),h=[];return m.filter(({meta:t,path:e})=>{if(!_(e,u)||e===u)return!1;if(u==="/"){const a=k(T.value.locales).filter(o=>o!=="/");if(e==="/404.html"||a.some(o=>_(e,o)))return!1}return(d(e,".html")&&!d(e,"/index.html")||d(e,"/"))&&l.shouldIndex(t)}).map(({path:t,meta:e})=>{const a=t.substring(u.length).split("/").length;return{title:l.titleGetter(e),icon:l.iconGetter(e),base:t.replace(/\/[^/]+\/?$/,"/"),order:l.orderGetter(e)||null,level:d(t,"/")?a-1:a,path:t}}).filter(({title:t,level:e})=>e<=l.level||!t).sort(({title:t,level:e,path:a,order:o},{title:i,level:r,path:p,order:c})=>e-r||(d(a,"/index.html")?-1:d(p,"/index.html")?1:o===null?c===null?t.localeCompare(i):c:c===null?o:o>0?c>0?o-c:-1:c<0?o-c:1)).forEach(t=>{var e;const{base:a,level:o}=t;switch(o){case 1:h.push(t);break;case 2:{const i=h.find(r=>r.path===a);i&&(i.children??(i.children=[])).push(t);break}default:{const i=h.find(r=>r.path===a.replace(/\/[^/]+\/$/,"/"));if(i){const r=(e=i.children)==null?void 0:e.find(p=>p.path===a);r&&(r.children??(r.children=[])).push(t)}}}}),h},G=y(()=>$());return()=>n("div",{class:"auto-catalog-wrapper"},[n("h2",{class:"main-title"},f.value.title),...G.value.map(({children:u=[],icon:m,path:h,title:t},e)=>[n("h3",{id:t,class:["child-title",{"has-children":u.length}]},[n("a",{href:`#${t}`,class:"header-anchor"},"#"),n(A,{class:"catalog-title",to:h},()=>[m?n(g,{icon:m}):null,`${e+1}. ${t||"Unknown"}`])]),u.length?n("ul",{class:"child-catalog-wrapper"},u.map(({children:a=[],icon:o,path:i,title:r},p)=>n("li",{class:"child-catalog-item"},[n("div",{class:["sub-title",{"has-children":a.length}]},[n("a",{href:`#${r}`,class:"header-anchor"},"#"),n(A,{class:"catalog-title",to:i},()=>[o?n(g,{icon:o}):null,`${e+1}.${p+1} ${r||"Unknown"}`])]),a.length?n("div",{class:"sub-catalog-wrapper"},a.map(({icon:c,path:v,title:E},O)=>n(A,{class:"sub-catalog-item",to:v},()=>[c?n(g,{icon:c}):null,`${e+1}.${p+1}.${O+1} ${E||"Unknown"}`]))):null]))):null])])}}),F=L({enhance:({app:l})=>{w("AutoCatalog",l)||l.component("AutoCatalog",f=>n(M,{titleGetter:s=>s[AUTO_CATALOG_TITLE_META_KEY],iconGetter:s=>s[AUTO_CATALOG_ICON_META_KEY],orderGetter:s=>s[AUTO_CATALOG_ORDER_META_KEY],shouldIndex:s=>Boolean(s[AUTO_CATALOG_INDEX_META_KEY]),...f}))}});export{F as default};
//# sourceMappingURL=config.js.map
